language: node_js
node_js:
  - "0.8"
  - "0.10"
  - "0.12"
  - "iojs-v1"
  - "iojs-v2"
env:
  - SUITE=smoke
  - SUITE=unit
  - SUITE=integration
  - SUITE=lint
addons:
  postgresql: "9.3"
services:
  - memcached
  - mongodb
  - mysql
  - redis
  - cassandra
  - postgresql
before_install:
  - sudo apt-get install -qq time
  - make update_npm_global
  - if [ "$SUITE" = "integration" ]; then make sub_node_modules; fi
install: if [ "$SUITE" != "smoke" ]; then npm install; fi
script: make $SUITE
